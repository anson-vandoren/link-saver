<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <script>
      (function () {
        const theme =
          localStorage.getItem('selectedTheme') || 'https://unpkg.com/bulmaswatch/darkly/bulmaswatch.min.css';
        document.write(`<link id="theme-stylesheet" rel="stylesheet" href="${theme}" />`);
      })();
    </script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav class="navbar is-transparent" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item title" href="/bookmarks.html">PagePouch</a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-end">
          <div class="level">
            <button
              class="navbar-item js-modal-trigger button is-primary is-small"
              id="add-link-btn"
              data-target="add-link-modal"
            >
              Add Link
            </button>
            <a class="navbar-item" href="./settings.html">Settings</a>
            <a class="navbar-item" href="#" id="logout-btn">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <section class="columns section">
      <div class="column is-6 is-offset-3">
        <div class="level">
          <div class="level-left">
            <h3 class="title level-item">Settings</h3>
          </div>
        </div>
        <div class="level">
          <form id="import-bookmarks-form" enctype="multipart/form-data">
            <label for="import-bookmarks-file" class="label">Import Bookmarks</label>
            <div class="field is-grouped">
              <div class="control">
                <div id="import-bookmarks-file" class="file has-name is-link">
                  <label class="file-label">
                    <input
                      name="import-bookmarks-file"
                      class="file-input"
                      type="file"
                      accept=".html"
                      aria-label="Choose bookmark file to import"
                    />
                    <span class="file-cta">
                      <span class="file-label"> Choose a file </span>
                    </span>
                    <span class="file-name">bookmarks.html</span>
                  </label>
                </div>
              </div>
              <button id="import-btn" class="button is-info" disabled>Import</button>
            </div>
            <progress value="0" max="100" id="import-progress" class="progress is-link is-hidden"></progress>
          </form>
        </div>
        <hr />
        <div class="export-bookmarks-container level">
          <div class="control">
            <label class="label">Export Bookmarks</label>
            <button id="export-btn" class="button is-info">Export</button>
          </div>
        </div>
        <hr />
        <div class="field level">
          <div class="control">
            <label for="theme-selector" class="label">Select Theme</label>
            <div class="select">
              <select id="theme-selector">
                <!-- Theme options will be populated here -->
              </select>
            </div>
          </div>
        </div>
        <hr />
        <div id="change-password-container">
          <form id="change-password-form">
            <h4 class="title is-5">Change Password</h4>
            <div class="columns">
              <div class="column">
                <div class="field">
                  <label for="new-password" class="label">New Password</label>
                  <div class="control">
                    <input
                      id="new-password"
                      type="password"
                      class="input"
                      placeholder="Enter a new password"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="field">
                  <label for="confirm-new-password" class="label">Confirm New Password</label>
                  <div class="control">
                    <input
                      id="confirm-new-password"
                      type="password"
                      class="input"
                      placeholder="Re-enter the new password"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="columns">
              <div class="column">
                <div class="field">
                  <label for="current-password" class="label">Current Password</label>
                  <div class="control">
                    <input
                      id="current-password"
                      type="password"
                      class="input"
                      placeholder="Enter your current password"
                      required
                    />
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="field">
                  <div class="control">
                    <label class="label" style="visibility: hidden">Change Password</label>
                    <!-- This is to align the button with the input fields -->
                    <button type="submit" class="button is-info">Change Password</button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <hr />
        <div class="field level">
          <div class="control">
            <label class="label">Purge Unused Tags</label>
            <button id="purge-tags-btn" class="button is-danger">Do It!</button>
          </div>
        </div>
      </div>
    </section>

    <script src="js/bundle.js" type="module"></script>
  </body>
</html>
